{"version":3,"sources":["utils/index.js","components/Game/Hand/NumberCard/index.js","components/Game/Hand/index.js","components/Game/Navigation/NavigationButton/index.js","components/Game/Navigation/index.js","components/Game/Operations/Operation/index.js","components/Game/Operations/index.js","components/Game/index.js","components/Navigation/NavigationButton/index.js","components/Navigation/index.js","pages/GamePage/index.js","App.js","reportWebVitals.js","index.js"],"names":["Fraction","require","KEY_MAP","SELECT_1","SELECT_2","SELECT_3","SELECT_4","SELECT_ADD","SELECT_SUB","SELECT_MUL","SELECT_DIV","SELECT_BACK","SELECT_RESET","SELECT_NEXT","SELECT_PREVIOUS","mapOperationToKey","operation","isSolvable","hand","length","equals","i","j","ALL_OPERATIONS","op","isComputationValid","filter","_","index","compute","generateHand","previousHands","Array","apply","map","Math","floor","random","previousHand","mapOperationToText","n1","n2","add","sub","mul","div","computeHand","n1Index","n2Index","currentHand","newNumber","newHand","isEndGame","card","enhance","compose","lifecycle","componentDidMount","this","props","isHidden","Mousetrap","bind","toString","select","componentWillReceiveProps","nextProps","unbind","componentWillUnmount","isSelected","isFinal","n","className","onClick","toFraction","Hand","cards","selected","selectCard","NavigationButton","text","goBack","reset","Operations","selectOperation","makeHistory","Game","useState","history","setHistory","latest","updateSelected","slice","updateOperation","disabled","componentWillMount","onPrevious","onNext","isPreviousDisabled","GamePage","hands","setHands","setCurrentHand","App","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7feacfc0.chunk.js","sourcesContent":["const Fraction = require(\"fraction.js\");\n\nexport const KEY_MAP = {\n  SELECT_1: [\"1\", \"a\"],\n  SELECT_2: [\"2\", \"s\"],\n  SELECT_3: [\"3\", \"d\"],\n  SELECT_4: [\"4\", \"f\"],\n  SELECT_ADD: [\"shift+=\", \"j\"],\n  SELECT_SUB: [\"-\", \"k\"],\n  SELECT_MUL: [\"shift+8\", \"l\"],\n  SELECT_DIV: [\"/\", \";\"],\n  SELECT_BACK: [\"backspace\", \"b\"],\n  SELECT_RESET: [\"r\"],\n  SELECT_NEXT: [\"enter\", \"right\", \"space\", \"]\"],\n  SELECT_PREVIOUS: [\"'\", \"left\", \"p\", \"[\"],\n}\n\nexport const mapCardToKey = (card) => {\n  return \"SELECT_\" + (card + 1).toString();\n}\n\nexport const mapOperationToKey = (operation) => {\n  switch (operation) {\n    case \"ADD\":\n      return \"SELECT_ADD\";\n    case \"SUB\":\n      return \"SELECT_SUB\";\n    case \"MUL\":\n      return \"SELECT_MUL\";\n    case \"DIV\":\n      return \"SELECT_DIV\";\n    default:\n      return \"ERROR\";\n  }\n}\n\nexport const isSolvable = (hand) => {\n  if (hand.length === 1) {\n    return hand[0].equals(24);\n  }\n\n  for (var i = 0; i < hand.length; i++) {\n    for (var j = 0; j < hand.length; j++) {\n      if (i === j) continue;\n      for (const op of ALL_OPERATIONS) {\n        if (isComputationValid(op, hand[i], hand[j])) {\n          // eslint-disable-next-line no-loop-func\n          const isCorrect = isSolvable([...hand.filter((_,index) => index !== i && index !== j), compute(op, hand[i], hand[j])]);\n          if (isCorrect) return true;\n        }\n      }\n    }\n  }\n  return false;\n}\n\nexport const NUM_CARDS = 4;\nexport const NUM_MIN = 1;\nexport const NUM_MAX = 13;\n\nconst generateCandidateHand = () => {\n  return Array.apply(null, Array(NUM_CARDS)).map(\n    () => Fraction(Math.floor(Math.random() * (NUM_MAX - NUM_MIN)) + NUM_MIN)\n  );\n}\n\nexport const generateHand = (previousHands) => {\n  var hand;\n  while (true) {\n    hand = generateCandidateHand();\n    // eslint-disable-next-line no-loop-func\n    if (isSolvable(hand) && previousHands.filter(previousHand => previousHand === hand).length === 0) {\n      return hand;\n    }\n  }\n  \n}\n\nexport const mapOperationToText = (operation) => {\n  switch (operation) {\n    case \"ADD\":\n      return \"+\";\n    case \"SUB\":\n      return \"-\";\n    case \"MUL\":\n      return \"ร\";\n    case \"DIV\":\n      return \"รท\";\n    default:\n      return \"ERROR\";\n  }\n}\n\nexport const ALL_OPERATIONS = [\"ADD\", \"SUB\", \"MUL\", \"DIV\"];\n\nexport const isComputationValid = (operation, n1, n2) => {\n  return !(operation === \"DIV\" && n2.equals(0));\n}\n\nconst compute = (operation, n1, n2) => {\n  switch (operation) {\n    case \"ADD\":\n      return n1.add(n2);\n    case \"SUB\":\n      return n1.sub(n2);\n    case \"MUL\":\n      return n1.mul(n2);\n    case \"DIV\":\n      return n1.div(n2);\n    default:\n      return \"ERROR\";\n  }\n}\n\nexport const computeHand = (operation, n1Index, n2Index, currentHand) => {\n  const n1 = currentHand[n1Index];\n  const n2 = currentHand[n2Index];\n\n  const newNumber = compute(operation, n1, n2);\n  let newHand = [...currentHand];\n  newHand[n1Index] = null;\n  newHand[n2Index] = newNumber;\n  return newHand;\n}\n\nexport const GOAL_NUMBER = 24;\n\nexport const isEndGame = (hand) => {\n  return hand.filter((card) => card !== null).length === 1;\n}\n\nexport const isWin = (hand) => {\n  return isEndGame(hand) && hand.filter((card) => card !== null)[0].equals(24);\n}","import React from \"react\";\nimport { GOAL_NUMBER, KEY_MAP } from \"../../../../utils\";\nimport \"./index.scss\";\nimport { compose, lifecycle } from \"recompose\";\nimport Mousetrap from \"mousetrap\";\n\nconst NumberCard = ({isHidden, isSelected, isFinal, n, select}) => {\n  return isHidden ? \n  <div className=\"number-card-hidden\"/> :\n  <div className={\"number-card \" + (isFinal ? \n    (n.equals(GOAL_NUMBER) ? \"correct\" : \"incorrect\") :\n    (isSelected ? \"selected\" : \"\"))\n  } onClick={select}>\n    <div className=\"number-card-number\">\n      { n.toFraction() }\n    </div>\n  </div>;\n}\n\nconst enhance = compose(lifecycle({\n  componentDidMount() {\n    if (!this.props.isHidden) {\n      Mousetrap.bind(KEY_MAP[\"SELECT_\" + (this.props.index + 1).toString()], this.props.select);\n    }\n  },\n  componentWillReceiveProps(nextProps) {\n    Mousetrap.unbind(KEY_MAP[\"SELECT_\" + (this.props.index + 1).toString()]);\n    if (!nextProps.isHidden) {\n      Mousetrap.bind(KEY_MAP[\"SELECT_\" + (this.props.index + 1).toString()], nextProps.select);\n    }\n  },\n  componentWillUnmount() {\n    if (!this.props.isHidden) {\n      Mousetrap.unbind(KEY_MAP[\"SELECT_\" + (this.props.index + 1).toString()]);\n    } \n  }\n}))\n\n\nexport default enhance(NumberCard);","import React from \"react\";\nimport NumberCard from \"./NumberCard\";\nimport \"./index.scss\";\nimport { isEndGame } from \"../../../utils\";\n\nconst Hand = ({cards, selected, selectCard}) => {\n  return <div className=\"hand\">\n    {cards.map((n, index) => \n    <NumberCard \n      key={index} \n      index={index}\n      n={n} \n      isHidden={n === null} \n      isSelected={index === selected}\n      isFinal={isEndGame(cards)}\n      select={() => selectCard(index)}\n    />)}\n  </div>\n}\n\nexport default Hand;","import React from \"react\";\nimport \"./index.scss\";\n\nconst NavigationButton = ({text, onClick}) => {\n  return <div className=\"game-navigation-button\" onClick={onClick}>\n    <div className=\"game-navigation-button-text\">\n      { text }\n    </div>\n  </div>;\n}\n\nexport default NavigationButton;","import React from \"react\";\nimport \"./index.scss\";\nimport NavigationButton from \"./NavigationButton\";\nimport { compose, lifecycle } from \"recompose\";\nimport Mousetrap from \"mousetrap\";\nimport { KEY_MAP } from \"../../../utils\";\n\nconst Navigation = ({goBack, reset}) => {\n  return <div className=\"game-navigation\">\n    <NavigationButton text=\"Back\" onClick={goBack}/>\n    <NavigationButton text=\"Reset\" onClick={reset}/>\n  </div>;\n}\n\nconst enhance = compose(lifecycle({\n  componentDidMount() {\n    Mousetrap.bind(KEY_MAP[\"SELECT_BACK\"], this.props.goBack);\n    Mousetrap.bind(KEY_MAP[\"SELECT_RESET\"], this.props.reset);\n  },\n  componentWillReceiveProps(nextProps) {\n    Mousetrap.unbind(KEY_MAP[\"SELECT_BACK\"]);\n    Mousetrap.unbind(KEY_MAP[\"SELECT_RESET\"]);\n    Mousetrap.bind(KEY_MAP[\"SELECT_BACK\"], nextProps.goBack);\n    Mousetrap.bind(KEY_MAP[\"SELECT_RESET\"], nextProps.reset);\n  },\n  componentWillUnmount() {\n    Mousetrap.unbind(KEY_MAP[\"SELECT_BACK\"]);\n    Mousetrap.unbind(KEY_MAP[\"SELECT_RESET\"]);\n  }\n}))\n\nexport default enhance(Navigation);","import React from \"react\";\nimport { KEY_MAP, mapOperationToKey, mapOperationToText } from \"../../../../utils\";\nimport \"./index.scss\";\nimport { compose, lifecycle } from \"recompose\";\nimport Mousetrap from \"mousetrap\";\n\nconst Operation = ({operation, isSelected, select}) => {\n  return <div className={\"operation \" + (isSelected ? \"selected\" : \"\")} onClick={select}>\n    <div className=\"operation-text\">\n      { mapOperationToText(operation) }\n    </div>\n  </div>;\n}\n\nconst enhance = compose(\n  lifecycle({\n    componentDidMount() {\n      Mousetrap.bind(KEY_MAP[mapOperationToKey(this.props.operation)], this.props.select);\n    },\n    componentWillReceiveProps(nextProps) {\n      Mousetrap.unbind(KEY_MAP[mapOperationToKey(this.props.operation)]);\n      Mousetrap.bind(KEY_MAP[mapOperationToKey(this.props.operation)], nextProps.select);\n    },\n    componentWillUnmount() {\n      Mousetrap.unbind(KEY_MAP[mapOperationToKey(this.props.operation)]);\n    }\n  })\n)\n\nexport default enhance(Operation);","import React from \"react\";\nimport Operation from \"./Operation\";\nimport \"./index.scss\";\nimport { ALL_OPERATIONS } from \"../../../utils\";\nconst Operations = ({selected, selectOperation}) => {\n  return <div className=\"operations\">\n    {ALL_OPERATIONS.map((operation, index) => \n      <Operation \n        key={index}\n        operation={operation} \n        select={() => selectOperation(operation)}\n        isSelected={selected === operation}\n      />\n    )}\n  </div>;\n}\n\nexport default Operations;","import React, { useState } from \"react\";\nimport { computeHand, isComputationValid, isEndGame } from \"../../utils\";\nimport Hand from \"./Hand\";\nimport Navigation from \"./Navigation\";\nimport Operations from \"./Operations\";\n\nconst makeHistory = (hand, selected, operation) => ({\n  hand,\n  selected,\n  operation\n})\n\nconst Game = ({hand}) => {\n  const [history, setHistory] = useState([makeHistory(hand, null, null)]);\n  const latest = history[history.length - 1];\n\n  const updateSelected = (index) => {\n    setHistory([...history.slice(0, history.length - 1), makeHistory(latest.hand, index, latest.operation)]);\n  }\n\n  const selectCard = (index) => {\n    if (index === latest.selected || isEndGame(latest.hand)) {\n      updateSelected(null);\n    } else if (latest.operation === null || latest.selected === null) {\n      updateSelected(index);\n    } else { // compute & push new history\n      if (isComputationValid(latest.operation, hand[latest.selected], hand[index])) {\n        setHistory([...history,\n          makeHistory(computeHand(latest.operation, latest.selected, index, latest.hand), null, null)\n        ]);\n      }\n    }\n  }\n\n  const updateOperation = (operation) => {\n    setHistory([...history.slice(0, history.length - 1), makeHistory(latest.hand, latest.selected, operation)]);\n  }\n\n  const selectOperation = (operation) => {\n    if (operation === latest.operation || isEndGame(latest.hand)) {\n      updateOperation(null);\n    } else {\n      updateOperation(operation);\n    }\n  }\n\n  const goBack = () => {\n    if (history.length > 1) {\n      setHistory(history.slice(0, history.length - 1));\n    } else {\n      setHistory([makeHistory(hand, null, null)]);\n    }\n  }\n\n  const reset = () => {\n    setHistory([makeHistory(hand, null, null)]);\n  }\n  \n  return <div className=\"game\">\n    <Navigation\n      goBack={goBack}\n      reset={reset}\n    />\n    <Hand \n      cards={latest.hand} \n      selected={latest.selected} \n      selectCard={selectCard}\n    />\n    <Operations\n      selected={latest.operation}\n      selectOperation={selectOperation}\n    />\n  </div>\n}\n\nexport default Game;","import React from \"react\";\nimport \"./index.scss\";\n\nconst NavigationButton = ({text, onClick, disabled=false}) => {\n  return <div className={\"navigation-button \" + (disabled ? \"disabled\" : \"\")} onClick={onClick}>\n    <div className=\"navigation-button-text\">\n      { text }\n    </div>\n  </div>;\n}\n\nexport default NavigationButton;","import React from \"react\";\nimport NavigationButton from \"./NavigationButton\";\nimport \"./index.scss\";\nimport { compose, lifecycle } from \"recompose\";\nimport Mousetrap from \"mousetrap\";\nimport { KEY_MAP } from \"../../utils\";\n\nconst Navigation = ({onPrevious, isPreviousDisabled, onNext}) => {\n  return <div className=\"navigation\">\n    <NavigationButton text=\"Previous\" onClick={onPrevious} disabled={isPreviousDisabled}/>\n    <NavigationButton text=\"Next\" onClick={onNext}/>\n  </div>;\n}\n\nconst enhance = compose(\n  lifecycle({\n    componentWillMount() {\n      Mousetrap.bind(KEY_MAP[\"SELECT_PREVIOUS\"], this.props.onPrevious);\n      Mousetrap.bind(KEY_MAP[\"SELECT_NEXT\"], this.props.onNext);\n    },\n    componentWillReceiveProps(nextProps) {\n      Mousetrap.unbind(KEY_MAP[\"SELECT_PREVIOUS\"]);\n      Mousetrap.bind(KEY_MAP[\"SELECT_PREVIOUS\"], nextProps.onPrevious);\n      Mousetrap.unbind(KEY_MAP[\"SELECT_NEXT\"]);\n      Mousetrap.bind(KEY_MAP[\"SELECT_NEXT\"], nextProps.onNext);\n    },\n    componentWillUnmount() {\n      Mousetrap.unbind(KEY_MAP[\"SELECT_PREVIOUS\"]);\n      Mousetrap.unbind(KEY_MAP[\"SELECT_NEXT\"]);\n    }\n  })\n)\n\nexport default enhance(Navigation);","import React, { useState } from \"react\";\nimport Game from \"../../components/Game\";\nimport Navigation from \"../../components/Navigation\";\nimport { generateHand } from \"../../utils\";\nimport \"./index.scss\";\n\nconst GamePage = () => {\n  const [hands, setHands] = useState([generateHand([])]);\n  const [currentHand, setCurrentHand] = useState(0);\n  const newHand = () => {\n    const hand = generateHand(hands);\n    setHands([...hands, hand]);\n  }\n  \n  const onPrevious = () => {\n    if (currentHand !== 0) {\n      setCurrentHand(currentHand - 1);\n    }\n  }\n\n  const onNext = () => {\n    if (currentHand === (hands.length - 1)) {\n      newHand();\n    }\n    setCurrentHand(currentHand + 1);\n  }\n\n\n  return <div className=\"game-page\">\n    <Navigation \n      onPrevious={onPrevious} \n      isPreviousDisabled={currentHand === 0} \n      onNext={onNext}\n    />\n    <Game key={currentHand} hand={hands[currentHand]}/> \n  </div>;\n}\n\nexport default GamePage;\n","import GithubCorner from \"react-github-corner\";\nimport GamePage from \"./pages/GamePage\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <GithubCorner href=\"https://github.com/alexander-ding/24/\"/>\n      <GamePage/>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}